@tailwind base;
@tailwind components;
@tailwind utilities;

@layer components {
    .page-shell {
        position: relative;
        isolation: isolate;
    }

    body.is-loading {
        cursor: progress;
    }

    body.is-loading .page-shell > :not(.loading-ghosts):not(.app-loading) {
        filter: blur(1px) saturate(0.9);
        opacity: 0.25;
        pointer-events: none;
        transition: filter 200ms ease, opacity 200ms ease;
    }

    .app-loading {
        position: fixed;
        inset: 0;
        z-index: 40;
        opacity: 0;
        visibility: hidden;
        transition: opacity 200ms ease;
        pointer-events: none;
    }

    body.is-loading .app-loading {
        opacity: 1;
        visibility: visible;
    }

    .loading-ghosts {
        position: fixed;
        inset: 0;
        z-index: 50;
        display: none;
        pointer-events: none;
    }

    body.is-loading .loading-ghosts {
        display: block;
    }

    .loading-backdrop {
        position: absolute;
        inset: 0;
        background:
            radial-gradient(900px circle at 10% 10%, rgba(148, 163, 184, 0.12), transparent 55%),
            radial-gradient(700px circle at 90% 5%, rgba(16, 185, 129, 0.12), transparent 50%),
            linear-gradient(180deg, rgba(15, 23, 42, 0.06), rgba(15, 23, 42, 0.16));
        backdrop-filter: blur(1px);
    }

    .loading-sheen {
        position: absolute;
        inset: -20% 0;
        background: linear-gradient(120deg, transparent 0%, rgba(255, 255, 255, 0.5) 40%, transparent 80%);
        transform: translateX(-100%);
        animation: loading-shimmer 1.4s ease-in-out infinite;
        opacity: 0.35;
        mix-blend-mode: screen;
    }

    .loading-surface {
        position: relative;
        overflow: hidden;
        background: linear-gradient(180deg, rgba(255, 255, 255, 0.98), rgba(255, 255, 255, 0.9));
        border: 1px solid rgba(226, 232, 240, 0.9);
        box-shadow: 0 30px 80px rgba(15, 23, 42, 0.12);
    }

    .loading-surface-full {
        border-radius: 0;
        border: none;
        box-shadow: none;
    }

    .loading-surface::after {
        content: "";
        position: absolute;
        inset: -40% -20%;
        background: linear-gradient(120deg, transparent 0%, rgba(255, 255, 255, 0.75) 40%, transparent 80%);
        transform: translateX(-100%);
        animation: loading-shimmer 1.2s ease-in-out infinite;
        opacity: 0.55;
        pointer-events: none;
    }

    .loading-skeleton {
        position: relative;
        overflow: hidden;
        background: #e2e8f0;
    }

    .loading-skeleton::after {
        content: "";
        position: absolute;
        inset: 0;
        background: linear-gradient(110deg, transparent 0%, rgba(255, 255, 255, 0.7) 45%, transparent 80%);
        transform: translateX(-100%);
        animation: loading-shimmer 1.1s ease-in-out infinite;
    }

    .loading-dot {
        box-shadow: 0 0 0 4px rgba(16, 185, 129, 0.2);
    }

    .loading-pulse {
        animation: loading-pulse 1.4s ease-in-out infinite;
    }

    .loading-bar {
        position: absolute;
        inset: 0 0 auto 0;
        height: 3px;
        background: linear-gradient(90deg, #0f172a, #34d399, #0f172a);
        background-size: 200% 100%;
        animation: loading-bar 1.2s linear infinite;
        box-shadow: 0 0 12px rgba(52, 211, 153, 0.35);
    }
}

@keyframes loading-shimmer {
    100% {
        transform: translateX(100%);
    }
}

@keyframes loading-sheen {
    100% {
        transform: translateX(100%);
    }
}

@keyframes loading-bar {
    100% {
        background-position: 200% 0;
    }
}

@keyframes loading-pulse {
    0%,
    100% {
        opacity: 0.6;
        transform: scale(0.92);
    }
    50% {
        opacity: 1;
        transform: scale(1);
    }
}
